{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const axiosSearchImg = async params => {\n  try {\n    const response = await axios.get('', { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n};\n","import 'simplelightbox/dist/simple-lightbox.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nconst loaderEl = document.querySelector('.loader');\n\nconst galleryEl = document.querySelector('.gallery');\nlet lightbox;\n\nexport function renderTemplate(data) {\n  const done = data.hits\n\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"card\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n      </a>\n      <ul class=\"description\">\n        <li><p>Likes</p><span>${likes}</span></li>\n        <li><p>View</p><span>${views}</span></li>\n        <li><p>Comments</p><span>${comments}</span></li>\n        <li><p>Download</p><span>${downloads}</span></li>\n      </ul>\n    </li>\n  `\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', done);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt' });\n  } else {\n    lightbox.refresh();\n  }\n}\nexport function hideLoader() {\n  loaderEl.style.display = 'none';\n}\nexport function showLoader() {\n  loaderEl.style.display = 'block';\n}\nexport function messageError(message) {\n  return iziToast.show({\n    position: 'topRight',\n    color: 'red',\n    message: message,\n  });\n}\n","import { axiosSearchImg } from './js/pixabay-api';\nimport {\n  hideLoader,\n  messageError,\n  renderTemplate,\n  showLoader,\n} from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\nconst inputFieldEl = document.querySelector('.inputFild');\nconst btnSearchImgEl = document.querySelector('.btnSearchImg');\nconst btnLoadMoreEl = document.querySelector('.btnLoadMore');\nconst galleryEl = document.querySelector('.gallery');\n\nbtnSearchImgEl.disabled = true;\n\nlet page = 1;\nlet searchImg = '';\n\nhideLoader();\n\nconst params = {\n  key: '52935594-c28acfca0b14dad36f3e3eac1',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n  page: page,\n};\n\ninputFieldEl.addEventListener('input', event => {\n  searchImg = event.target.value.trim();\n  if (searchImg === '') {\n    btnSearchImgEl.disabled = true;\n    return;\n  }\n  btnSearchImgEl.disabled = false;\n  params.q = searchImg;\n  params.page = 1;\n});\n\nformEl.addEventListener('submit', event => {\n  event.preventDefault();\n  inputFieldEl.value = '';\n  btnSearchImgEl.disabled = true;\n  galleryEl.innerHTML = '';\n  showLoader();\n  btnLoadMoreEl.classList.add('active');\n\n  axiosSearchImg(params)\n    .then(data => {\n      if (data.totalHits === 0) {\n        btnLoadMoreEl.classList.add('active');\n        hideLoader();\n        messageError(\n          'Sorry, there are no images matching your search query. Please try again!'\n        );\n\n        return;\n      }\n      renderTemplate(data);\n      hideLoader();\n      btnLoadMoreEl.classList.remove('active');\n    })\n    .catch(error => {\n      console.error('Failed to load images:', error);\n    });\n});\n\nbtnLoadMoreEl.addEventListener('click', () => {\n  btnLoadMoreEl.classList.add('active');\n  showLoader();\n  params.page += 1;\n\n  axiosSearchImg(params)\n    .then(data => {\n      if (data.hits.length === 0) {\n        btnLoadMoreEl.classList.add('active');\n\n        hideLoader();\n        return;\n      }\n      renderTemplate(data);\n      btnLoadMoreEl.classList.remove('active');\n      if (data.hits.length < params.per_page) {\n        btnLoadMoreEl.classList.add('active');\n        messageError(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n      }\n      hideLoader();\n\n      const { height } = galleryEl.getBoundingClientRect();\n      window.scrollBy({\n        top: height - 100,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error => {\n      console.error('Failed to load images:', error);\n    });\n});\n"],"names":["axios","axiosSearchImg","params","error","loaderEl","galleryEl","lightbox","renderTemplate","data","done","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","hideLoader","showLoader","messageError","message","iziToast","formEl","inputFieldEl","btnSearchImgEl","btnLoadMoreEl","page","searchImg","event","height"],"mappings":"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"}