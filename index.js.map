{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst galleryEl = document.querySelector('.gallery');\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\nexport const axiosImages = async params => {\n  try {\n    const response = await axios.get('', { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n};\n","import 'simplelightbox/dist/simple-lightbox.min.css';\nimport SimpleLightbox from 'simplelightbox';\n\nconst loaderEl = document.querySelector('.loader');\n\nconst galleryEl = document.querySelector('.gallery');\nlet lightbox;\n\nexport function renderTemplate(data) {\n  const done = data.hits\n\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"card\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n      </a>\n      <ul class=\"description\">\n        <li><p>Likes</p><span>${likes}</span></li>\n        <li><p>View</p><span>${views}</span></li>\n        <li><p>Comments</p><span>${comments}</span></li>\n        <li><p>Download</p><span>${downloads}</span></li>\n      </ul>\n    </li>\n  `\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', done);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt' });\n  } else {\n    lightbox.refresh();\n  }\n}\nexport function hideLoader() {\n  loaderEl.style.display = 'none';\n}\nexport function showLoader() {\n  loaderEl.style.display = 'block';\n}\n","import { axiosImages } from './js/pixabay-api';\nimport { hideLoader, renderTemplate, showLoader } from './js/render-functions';\nimport iziToast from 'izitoast';\n\nconst formEl = document.querySelector('.form');\nconst inputFieldEl = document.querySelector('.inputFild');\nconst btnSearchImgEl = document.querySelector('.btnSearchImg');\nconst btnLoadMoreEl = document.querySelector('.btnLoadMore');\nconst galleryEl = document.querySelector('.gallery');\n\nbtnSearchImgEl.disabled = true;\n\nlet page = 1;\nlet secondSearch = '';\nlet count = 0;\nlet searchImg = '';\n\nhideLoader();\n\nconst params = {\n  key: '52935594-c28acfca0b14dad36f3e3eac1',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n  page: page,\n};\n\ninputFieldEl.addEventListener('input', event => {\n  searchImg = event.target.value.trim();\n  if (searchImg === '') {\n    btnSearchImgEl.disabled = true;\n    return;\n  }\n  btnSearchImgEl.disabled = false;\n  params.q = searchImg;\n  params.page = 1;\n});\n\nformEl.addEventListener('submit', event => {\n  event.preventDefault();\n  inputFieldEl.value = '';\n\n  btnSearchImgEl.disabled = true;\n  btnLoadMoreEl.classList.add('active');\n\n  secondSearch = searchImg;\n  if (searchImg === '') {\n    return;\n  } else if (secondSearch === searchImg) {\n    galleryEl.innerHTML = '';\n  }\n\n  showLoader();\n\n  axiosImages(params)\n    .then(data => {\n      if (data.totalHits === 0) {\n        btnLoadMoreEl.classList.add('active');\n        hideLoader();\n        iziToast.show({\n          position: 'topRight',\n          color: 'red',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n\n        return;\n      }\n      renderTemplate(data);\n      hideLoader();\n      btnLoadMoreEl.classList.remove('active');\n    })\n    .catch(error => {\n      console.error('Failed to load images:', error);\n    });\n});\n\nbtnLoadMoreEl.addEventListener('click', () => {\n  btnLoadMoreEl.classList.add('active');\n  showLoader();\n  params.page += 1;\n\n  axiosImages(params)\n    .then(data => {\n      count += params.per_page;\n\n      if (count >= data.totalHits) {\n        btnLoadMoreEl.classList.add('active');\n        iziToast.show({\n          position: 'topRight',\n          color: 'red',\n          message: \"We're sorry, but you've reached the end of search results.\",\n        });\n        hideLoader();\n        console.log(\n          \"We're sorry, but you've reached the end of search results.\"\n        );\n        return;\n      }\n      renderTemplate(data);\n      btnLoadMoreEl.classList.remove('active');\n      hideLoader();\n      const { height } = galleryEl.getBoundingClientRect();\n      window.scrollBy({\n        top: height - 100,\n        behavior: 'smooth',\n      });\n    })\n    .catch(error => {\n      console.error('Failed to load images:', error);\n    });\n});\n"],"names":["axios","axiosImages","params","error","loaderEl","galleryEl","lightbox","renderTemplate","data","done","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","hideLoader","showLoader","formEl","inputFieldEl","btnSearchImgEl","btnLoadMoreEl","page","secondSearch","count","searchImg","event","iziToast","height"],"mappings":"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"}