{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\naxios.defaults.baseURL = 'https://pixabay.com/api/';\n\nexport const axiosSearchImg = async params => {\n  try {\n    const response = await axios.get('', { params });\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    throw error;\n  }\n};\n","import 'simplelightbox/dist/simple-lightbox.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\n\nconst loaderEl = document.querySelector('.loader');\n\nconst galleryEl = document.querySelector('.gallery');\nlet lightbox;\n\nexport function renderTemplate(data) {\n  const done = data.hits\n\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <li class=\"card\">\n      <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\"/>\n      </a>\n      <ul class=\"description\">\n        <li><p>Likes</p><span>${likes}</span></li>\n        <li><p>View</p><span>${views}</span></li>\n        <li><p>Comments</p><span>${comments}</span></li>\n        <li><p>Download</p><span>${downloads}</span></li>\n      </ul>\n    </li>\n  `\n    )\n    .join('');\n\n  galleryEl.insertAdjacentHTML('beforeend', done);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', { captionsData: 'alt' });\n  } else {\n    lightbox.refresh();\n  }\n}\nexport function hideLoader() {\n  loaderEl.style.display = 'none';\n}\nexport function showLoader() {\n  loaderEl.style.display = 'block';\n}\nexport function messageError(message) {\n  return iziToast.error({\n    title: 'Error',\n    message: message,\n    position: 'topRight',\n    timeout: 4000,\n    closeOnClick: true,\n    transitionIn: 'fadeInDown',\n    transitionOut: 'fadeOutUp',\n  });\n}\n","import { axiosSearchImg } from './js/pixabay-api';\nimport {\n  hideLoader,\n  messageError,\n  renderTemplate,\n  showLoader,\n} from './js/render-functions';\n\nconst formEl = document.querySelector('.form');\nconst inputFieldEl = document.querySelector('.inputFild');\nconst btnSearchImgEl = document.querySelector('.btnSearchImg');\nconst btnLoadMoreEl = document.querySelector('.btnLoadMore');\nconst galleryEl = document.querySelector('.gallery');\n\nbtnLoadMoreEl.hidden = true;\nbtnSearchImgEl.disabled = true;\n\nhideLoader();\n\nlet page = 1;\nlet searchImg = '';\nlet totalHits = 0;\n\nconst params = {\n  key: '52935594-c28acfca0b14dad36f3e3eac1',\n  q: '',\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  per_page: 15,\n  page: 1,\n};\n\ninputFieldEl.addEventListener('input', event => {\n  searchImg = event.target.value.trim();\n  console.log(searchImg);\n  if (searchImg === '') {\n    btnSearchImgEl.disabled = true;\n    return;\n  }\n  btnSearchImgEl.disabled = false;\n});\n\nformEl.addEventListener('submit', async event => {\n  event.preventDefault();\n  btnSearchImgEl.disabled = true;\n\n  page = 1;\n  params.page = 1;\n  params.q = searchImg;\n  galleryEl.innerHTML = '';\n  btnLoadMoreEl.hidden = true;\n  showLoader();\n\n  try {\n    const data = await axiosSearchImg(params);\n\n    totalHits = Number(data?.totalHits ?? 0);\n\n    if (!totalHits) {\n      hideLoader();\n      messageError(\n        'Sorry, there are no images matching your search query. Please try again!'\n      );\n      return;\n    }\n\n    renderTemplate(data);\n    hideLoader();\n\n    const hasMore =\n      page * params.per_page < totalHits &&\n      data.hits.length === params.per_page;\n    btnLoadMoreEl.hidden = !hasMore;\n  } catch (error) {\n    console.error('Failed to load images:', error);\n    hideLoader();\n    btnLoadMoreEl.hidden = true;\n  } finally {\n    inputFieldEl.value = '';\n  }\n});\n\nbtnLoadMoreEl.addEventListener('click', async () => {\n  btnLoadMoreEl.hidden = true;\n  showLoader();\n\n  try {\n    page += 1;\n    params.page = page;\n\n    const data = await axiosSearchImg(params);\n\n    if (!data?.hits?.length) {\n      hideLoader();\n      messageError(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n      return;\n    }\n\n    renderTemplate(data);\n    const reachedEnd =\n      page * params.per_page >= totalHits || data.hits.length < params.per_page;\n\n    btnLoadMoreEl.hidden = reachedEnd;\n\n    if (reachedEnd) {\n      messageError(\n        \"We're sorry, but you've reached the end of search results.\"\n      );\n    }\n\n    hideLoader();\n\n    const { height } = galleryEl.getBoundingClientRect();\n    window.scrollBy({ top: height - 100, behavior: 'smooth' });\n  } catch (error) {\n    console.error('Failed to load images:', error);\n    hideLoader();\n    btnLoadMoreEl.hidden = true;\n  }\n});\n"],"names":["axios","axiosSearchImg","params","error","loaderEl","galleryEl","lightbox","renderTemplate","data","done","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","hideLoader","showLoader","messageError","message","iziToast","formEl","inputFieldEl","btnSearchImgEl","btnLoadMoreEl","page","searchImg","totalHits","event","hasMore","_a","reachedEnd","height"],"mappings":"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"}